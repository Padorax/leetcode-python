![](../images/146.png)
### Solution
Doubly Linked List + HashMap.
```java
import java.util.HashMap;

public class LRUCache {
    class Entry {
        int key;
        int val;
        Entry after;
        Entry before;
        public Entry(int key, int value) {
            this.key = key;
            this.val = value;
        }

        public Entry() {
            this(0, 0);
        }
    }

    private HashMap<Integer, Entry> map;
    int capacity, size;
    private Entry head, tail;

    public LRUCache(int cap) {
        map = new HashMap<>();
        capacity = cap;
        head = new Entry();
        tail = new Entry();
        head.after = tail;
        tail.before = head;
    }

    public int get(int key) {
       Entry node = map.get(key);
       if (node == null) {
           return -1;
       }
       updateEntry(node);
       return node.val;
    }

    public void put(int key, int value) {
        Entry node = map.get(key);
        if (node == null) {
            Entry newNode = new Entry(key, value);
            map.put(key, newNode);
            addEntry(newNode);
            size++;
        } else {
            node.val = value;
            updateEntry(node);
        }
        if (size > capacity) {
            Entry toDel = tail.before;
            deleteEntry(toDel);
            map.remove(toDel.key);
            size--;
        }
    }

    public void updateEntry(Entry node) {
        deleteEntry(node);
        addEntry(node);
    }

//    add node to front (most recently used)
    public void addEntry(Entry node) {
        node.before = head;
        node.after = head.after;
        head.after = node;
        node.after.before = node;

    }

//    remove node from rear (least recently used)
    public void deleteEntry(Entry node) {
        node.before.after = node.after;
        node.after.before = node.before;
    }

}

```